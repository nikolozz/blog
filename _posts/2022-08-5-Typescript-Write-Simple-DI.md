---
layout: post
title: TypeScript | Write Simple Dependency Injection
published: true
tags: JavaScript
---

Dependency Injection ("рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃюрЃћрЃЦрЃфрЃўрЃљ") рЃћрЃарЃЌ-рЃћрЃарЃЌрЃў рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЎрЃЮрЃюрЃфрЃћрЃърЃфрЃўрЃљрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃќрЃћ рЃЮрЃарЃўрЃћрЃюрЃбрЃўрЃарЃћрЃЉрЃБрЃџ рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃарЃћрЃЉрЃљрЃерЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃњрЃЋрЃљрЃФрЃџрЃћрЃЋрЃА рЃЎрЃџрЃљрЃАрЃћрЃЉрЃў рЃюрЃљрЃЎрЃџрЃћрЃЉрЃљрЃЊ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃў рЃЊрЃљ рЃЏрЃљрЃарЃбрЃўрЃЋрЃљрЃЊ рЃЕрЃљрЃюрЃљрЃфрЃЋрЃџрЃћрЃЉрЃљрЃЊрЃў рЃўрЃДрЃЮрЃА.


рЃАрЃљрЃюрЃљрЃЏ рЃарЃћрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљрЃќрЃћ рЃњрЃљрЃЊрЃљрЃЋрЃљрЃџрЃЌ, рЃЏрЃЮрЃЎрЃџрЃћрЃЊ рЃЊрЃљрЃЋрЃгрЃћрЃа DI-рЃќрЃћ.

рЃЏрЃћрЃ«рЃБрЃЌрЃћ S.O.L.I.D-рЃўрЃА рЃърЃарЃўрЃюрЃфрЃўрЃърЃўрЃА (Dependency Inversion)-рЃўрЃА рЃЌрЃљрЃюрЃљрЃ«рЃЏрЃљрЃЊ, рЃЎрЃџрЃљрЃАрЃў рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў рЃљрЃЉрЃАрЃбрЃарЃљрЃЦрЃфрЃўрЃљрЃќрЃћ рЃЊрЃљ рЃљрЃарЃљ рЃарЃћрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљрЃќрЃћ (рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџ рЃЎрЃџрЃљрЃАрЃќрЃћ), рЃљрЃЏрЃўрЃА рЃЏрЃўрЃдрЃгрЃћрЃЋрЃљрЃерЃў рЃњрЃЋрЃћрЃ«рЃЏрЃљрЃарЃћрЃЉрЃљ DI рЃарЃЮрЃЏрЃћрЃџрЃЏрЃљрЃф рЃўрЃфрЃўрЃА рЃЌрЃБ рЃарЃЮрЃњрЃЮрЃа рЃБрЃюрЃЊрЃљ "рЃерЃћрЃЦрЃЏрЃюрЃљрЃА" рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў.

![](https://cdn-media-1.freecodecamp.org/images/1*TF-VdAgPfcD497kAW77Ukg.png)

OOP-рЃерЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃљрЃА рЃћрЃарЃЌрЃЏрЃљрЃюрЃћрЃЌрЃўрЃА рЃЏрЃўрЃЏрЃљрЃарЃЌ рЃљрЃдрЃЋрЃюрЃўрЃерЃюрЃљрЃЋрЃЌ рЃбрЃћрЃарЃЏрЃўрЃюрЃћрЃЉрЃўрЃЌ - рЃљрЃАрЃЮрЃфрЃўрЃљрЃфрЃўрЃљ, рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ, рЃЎрЃЮрЃЏрЃърЃЮрЃќрЃўрЃфрЃўрЃљ рЃЊрЃљ рЃљ.рЃе. рЃљрЃЏ рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃерЃў рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃљрЃЏ рЃАрЃљрЃЏ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃљрЃА рЃњрЃљрЃюрЃЋрЃўрЃ«рЃўрЃџрЃљрЃЋрЃЌ. рЃЏрЃЮрЃЎрЃџрЃћрЃЊ рЃљрЃЋрЃдрЃгрЃћрЃарЃЮрЃЌ рЃЌрЃБ рЃарЃљрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА рЃћрЃА рЃбрЃћрЃарЃЏрЃўрЃюрЃћрЃЉрЃў.

- рЃљрЃАрЃЮрЃфрЃўрЃљрЃфрЃўрЃљ - рЃќрЃЮрЃњрЃљрЃЊрЃў рЃбрЃћрЃарЃЏрЃўрЃюрЃўрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃЏрЃАрЃљрЃќрЃдрЃЋрЃарЃћрЃџрЃљрЃЊ, рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў a рЃерЃћрЃўрЃфрЃљрЃЋрЃА рЃЮрЃЉрЃўрЃћрЃЦрЃб b-рЃА.

- рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ - рЃљрЃАрЃЮрЃфрЃўрЃљрЃфрЃўрЃўрЃА рЃбрЃўрЃърЃўрЃљ, рЃарЃЮрЃфрЃљ рЃЋрЃљрЃЏрЃЉрЃЮрЃЉрЃЌ рЃарЃЮрЃЏ рЃЮрЃЉрЃўрЃћрЃЦрЃб a-рЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў b, рЃЋрЃњрЃБрЃџрЃўрЃАрЃ«рЃЏрЃЮрЃЉрЃЌ рЃарЃЮрЃЏ a рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў рЃерЃћрЃўрЃфрЃљрЃЋрЃА b рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃА, рЃЏрЃљрЃњрЃарЃљрЃЏ b рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃћрЃЉрЃБрЃџрЃў a рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃерЃўрЃњрЃюрЃўрЃЌ, рЃЏрЃљрЃЌрЃў рЃАрЃљрЃАрЃўрЃфрЃЮрЃфрЃ«рЃџрЃЮ рЃфрЃўрЃЎрЃџрЃў рЃљрЃа рЃљрЃарЃўрЃА рЃћрЃарЃЌрЃЏрЃљрЃюрЃћрЃЌрЃќрЃћ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў.

```typescript
class B {}

class A {
    constructor (b: B) { }
}
const b = new B();

new A(b)
```

рЃЌрЃБ рЃгрЃљрЃЋрЃерЃџрЃўрЃЌ рЃЮрЃЉрЃўрЃћрЃЦрЃб a-рЃА, b рЃњрЃљрЃљрЃњрЃарЃФрЃћрЃџрЃћрЃЉрЃА рЃфрЃ«рЃЮрЃЋрЃарЃћрЃЉрЃљрЃА, рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў рЃћрЃарЃЌрЃЏрЃљрЃюрЃћрЃЌрЃЌрЃљрЃю рЃљрЃа рЃљрЃарЃўрЃљрЃю рЃЏрЃГрЃўрЃЊрЃарЃЮ рЃЎрЃљрЃЋрЃерЃўрЃарЃерЃў.

- рЃЎрЃЮрЃЏрЃърЃЮрЃќрЃўрЃфрЃўрЃљ - рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃЏрЃГрЃўрЃЊрЃарЃЮ рЃЎрЃљрЃЋрЃерЃўрЃарЃўрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃА рЃерЃЮрЃарЃўрЃА, рЃћрЃарЃЌрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃљрЃЋрЃА рЃЏрЃћрЃЮрЃарЃћ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃўрЃА рЃАрЃљрЃАрЃўрЃфрЃЮрЃфрЃ«рЃџрЃЮ рЃфрЃўрЃЎрЃџрЃА.

```typescript
class B { }

class A {
    private b: B;

    constructor() {
        this.b = new B();
    }
}

new A()
```

DI-рЃўрЃА рЃЊрЃарЃЮрЃА рЃњрЃЋрЃљрЃЦрЃЋрЃА рЃљрЃњрЃарЃћрЃњрЃљрЃфрЃўрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃА рЃерЃЮрЃарЃўрЃА, рЃўрЃАрЃўрЃюрЃў рЃљрЃа рЃљрЃарЃўрЃљрЃю рЃћрЃарЃЌрЃЏрЃљрЃюрЃћрЃЌрЃЌрЃљрЃю рЃЏрЃГрЃўрЃЊрЃарЃЮрЃЊ рЃЊрЃљрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃБрЃџрЃћрЃЉрЃў. 

рЃарЃљрЃЊрЃњрЃљрЃю рЃерЃћрЃЋрЃФрЃџрЃЮрЃЌ "рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃўрЃюрЃћрЃЦрЃфрЃўрЃљ" рЃњрЃЋрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ **рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃў** рЃАрЃљрЃЊрЃљрЃф рЃерЃћрЃўрЃюрЃљрЃ«рЃћрЃЉрЃљ рЃўрЃюрЃАрЃбрЃарЃБрЃЦрЃфрЃўрЃљ рЃЌрЃБ рЃарЃЮрЃњрЃЮрЃа рЃерЃћрЃЋрЃЦрЃЏрЃюрЃљрЃЌ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў, рЃарЃљ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃў рЃњрЃљрЃљрЃЕрЃюрЃўрЃљ рЃљрЃЏ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃА рЃЊрЃљ рЃАрЃ«рЃЋрЃљ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ [Inversify](https://inversify.io/) рЃљрЃарЃўрЃА IoC (Inversion of Control) Container рЃарЃЮрЃЏрЃћрЃџрЃерЃўрЃф рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃерЃћрЃЋрЃўрЃюрЃљрЃ«рЃЮрЃЌ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў рЃЊрЃљ рЃЏрЃљрЃЌрЃў рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃў, рЃ«рЃЮрЃџрЃЮ рЃарЃЮрЃфрЃљ рЃљрЃЏ рЃЎрЃџрЃљрЃАрЃА рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ, Inversify рЃўрЃќрЃарЃБрЃюрЃћрЃЉрЃА рЃарЃЮрЃЏ рЃЏрЃљрЃАрЃќрЃћ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў рЃерЃћрЃЦрЃЏрЃюрЃљрЃА рЃЊрЃљ рЃЏрЃљрЃЌрЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљ рЃњрЃљрЃЊрЃљрЃАрЃфрЃћрЃА рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃерЃў.

```typescript
import { Container, injectable, inject } from "inversify";

@injectable()
class A {}

@injectable()
class B {}

@injectable()
class C {

    private a: A;
    private b: B;

    public constructor(a: A, b: B) {
        this.a = a;
        this.b = a;
    }
};


const container = new Container();
container.bind<A>(A).to(A);
container.bind<B>(B).to(B);
container.bind<C>(C).to(C);
```

рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў рЃЋрЃЦрЃЏрЃюрЃўрЃЌ рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃА, рЃАрЃљрЃЊрЃљрЃф рЃЋрЃљрЃарЃћрЃњрЃўрЃАрЃбрЃарЃўрЃарЃћрЃЉрЃЌ рЃЎрЃџрЃљрЃАрЃћрЃЉрЃА, рЃарЃЮрЃфрЃљ C рЃЎрЃџрЃљрЃАрЃА рЃерЃћрЃЋрЃЦрЃЏрЃюрЃўрЃЌ Inversify рЃљрЃЏрЃЮрЃўрЃдрЃћрЃЉрЃА A рЃЊрЃљ B рЃЎрЃџрЃљрЃАрЃћрЃЉрЃА рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃўрЃЊрЃљрЃю рЃЊрЃљ рЃерЃћрЃЦрЃЏрЃюрЃўрЃА рЃЏрЃљрЃЌ instance-рЃћрЃЉрЃА. рЃЎрЃџрЃљрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃарЃЊрЃљ, рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃўрЃА рЃўрЃюрЃћрЃЦрЃфрЃўрЃљ рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃерЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃњрЃљрЃарЃЎрЃЋрЃћрЃБрЃџрЃў "рЃбрЃЮрЃЎрЃћрЃюрЃўрЃЌ" рЃўрЃЦрЃюрЃћрЃЉрЃљ рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃў.

```typescript
@injectable()
class B {
  constructor(@inject(API_KEY)) {}
}

const API_KEY = Symbol.for('API_KEY');

const container = new Container();
container.bind<string>(API_KEY).to('abc');
```

рЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў `API_KEY` рЃљрЃарЃўрЃА рЃбрЃЮрЃЎрЃћрЃюрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃўрЃЊрЃљрЃю `abc` рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЉрЃљрЃА рЃљрЃЏрЃЮрЃўрЃдрЃћрЃЉрЃА.

Angular/Nest рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЎрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃљрЃА рЃљрЃа рЃњрЃЋрЃўрЃгрЃћрЃЋрЃА IoC рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃўрЃА рЃЏрЃћрЃюрЃћрЃ»рЃЏрЃћрЃюрЃбрЃў, рЃћрЃА рЃцрЃарЃћрЃўрЃЏрЃЋрЃЮрЃарЃЎрЃћрЃЉрЃў рЃЌрЃЋрЃўрЃЌрЃЮрЃю рЃљрЃЏрЃћрЃюрЃћрЃ»рЃћрЃЉрЃћрЃю рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃА, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃарЃЮрЃњрЃЮрЃарЃф рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃА рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃџрЃЮрЃЉрЃљ рЃњрЃЋрЃљрЃЦрЃЋрЃА рЃарЃЮрЃЏ рЃерЃћрЃЋрЃфрЃЋрЃљрЃџрЃЮрЃЌ рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў. 

рЃњрЃљрЃЊрЃљрЃЋрЃўрЃЊрЃћрЃЌ рЃЕрЃЋрЃћрЃюрЃў рЃЏрЃљрЃарЃбрЃўрЃЋрЃў DI-рЃўрЃА рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљрЃќрЃћ. 

рЃарЃЮрЃњрЃЮрЃарЃф рЃЋрЃўрЃфрЃўрЃЌ TypeScript-рЃерЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў рЃАрЃ«рЃЋрЃљ OOP рЃћрЃюрЃћрЃЉрЃўрЃАрЃњрЃљрЃю рЃњрЃљрЃюрЃАрЃ«рЃЋрЃљрЃЋрЃћрЃЉрЃўрЃЌ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃЏрЃћрЃюрЃбрЃўрЃА рЃЊрЃарЃЮрЃА рЃњрЃЋрЃљрЃЦрЃЋрЃА, рЃ«рЃЮрЃџрЃЮ рЃЎрЃЮрЃЊрЃўрЃА рЃбрЃарЃљрЃюрЃАрЃџрЃљрЃфрЃўрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ JavaScript-рЃерЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃћрЃЉрЃў рЃЦрЃарЃћрЃЉрЃљ рЃарЃљрЃЊрЃњрЃљрЃю рЃўрЃА рЃљрЃа рЃљрЃарЃўрЃА JS-рЃўрЃА рЃерЃћрЃЏрЃљрЃЊрЃњрЃћрЃюрЃћрЃџрЃў рЃюрЃљрЃгрЃўрЃџрЃў. 

рЃњрЃљрЃюрЃЋрЃўрЃ«рЃўрЃџрЃЮрЃЌ Nest-рЃўрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў:

```typescript
interface BasicService {
    sayHello(): void;
}

@Injectable()
class Service implements BasicService () {
    sayHello() {
        console.log('hello')
    }
}

@Controller()
class APIController {
    constructor(private readonly service: Service) {}
}
```

рЃарЃљ рЃЏрЃЮрЃ«рЃЊрЃћрЃЉрЃљ рЃЌрЃБ `Service`-рЃА `BasicService`-рЃўрЃЌ рЃЕрЃљрЃЋрЃљрЃюрЃљрЃфрЃЋрЃџрЃћрЃЉрЃЌ рЃЎрЃЮрЃюрЃбрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃерЃў? рЃЊрЃљ рЃарЃљрЃбрЃЮрЃЏ рЃњрЃЋрЃўрЃгрЃћрЃЋрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА рЃЏрЃљрЃњрЃўрЃЋрЃарЃљрЃЊ рЃЎрЃџрЃљрЃАрЃўрЃА рЃњрЃљрЃгрЃћрЃарЃљ type-рЃљрЃЊ? ­Ъцћ

рЃарЃЮрЃњрЃЮрЃарЃф рЃљрЃЋрЃдрЃюрЃўрЃерЃюрЃћрЃЌ JavaScriptРђЊрЃерЃў рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃћрЃЉрЃў рЃљрЃа рЃњрЃЋрЃљрЃЦрЃЋрЃА, рЃљрЃЏрЃўрЃбрЃЮрЃЏ type-рЃљрЃЊ рЃЎрЃџрЃљрЃАрЃўрЃА рЃњрЃљрЃгрЃћрЃарЃљ рЃњрЃЋрЃўрЃгрЃћрЃЋрЃА, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃњрЃљрЃљрЃЕрЃюрЃўрЃљ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў, рЃљрЃЏ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃќрЃћ рЃЊрЃљрЃДрЃарЃЊрЃюрЃЮрЃЉрЃўрЃЌ Nest-рЃў рЃ«рЃЋрЃЊрЃћрЃЉрЃљ рЃарЃЮрЃЏрЃћрЃџрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў рЃБрЃюрЃЊрЃљ рЃљрЃЏрЃЮрЃўрЃдрЃЮрЃА рЃЎрЃЮрЃюрЃбрЃћрЃўрЃюрЃћрЃарЃўрЃЊрЃљрЃю. рЃЏрЃљрЃњрЃарЃљрЃЏ рЃАрЃљрЃўрЃЊрЃљрЃю рЃЕрЃюрЃЊрЃћрЃЉрЃљ рЃћрЃА рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў? 

рЃљрЃЏрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃљрЃА рЃњрЃЋрЃљрЃФрЃџрЃћрЃЋрЃА `reflect-metadata` рЃЏрЃўрЃАрЃў рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃЎрЃџрЃљрЃАрЃА рЃЏрЃўрЃЋрЃљрЃюрЃўрЃГрЃЮрЃЌ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃарЃЮрЃЏрЃџрЃћрЃЉрЃАрЃљрЃф рЃерЃћрЃЏрЃЊрЃћрЃњрЃерЃў рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ. 

рЃЕрЃЋрЃћрЃюрЃў рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљрЃљ рЃЦрЃЋрЃћрЃЏрЃЮрЃЌ рЃЏрЃЮрЃфрЃћрЃЏрЃБрЃџрЃў рЃЎрЃЮрЃЊрЃў рЃњрЃљрЃЊрЃљрЃЋрЃгрЃћрЃарЃЮрЃЌ DI-рЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃЌ: 

```typescript
class WelcomeMessageGenerator {
   getMessage() {
        return `Hello! This is a worst example!`
    }
}

class App {
    constructor(private welcomeMessage: WelcomeMessageGenerator) {}

    yieldWelcomeMessage() {
        console.log(this.welcomeMessage.getMessage())
    }
}

const welcomeMessage = new WelcomeMessageGenerator();

const app = new App(welcomeMessage);
```

рЃърЃўрЃарЃЋрЃћрЃџ рЃарЃўрЃњрЃерЃў рЃњрЃЋрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ `reflect-metadata` `package`-рЃў.

```sh
npm init -y && npm i reflect-metadata;
```

рЃљрЃАрЃћрЃЋрЃћ рЃЊрЃљрЃњрЃЋрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ рЃЊрЃћрЃЎрЃЮрЃарЃљрЃбрЃЮрЃарЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ, рЃљрЃЏрЃўрЃбрЃЮрЃЏ `tsconfig.json`-рЃерЃў рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃЮрЃЌ рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ:

```json
{
  "compilerOptions": {
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    "target": "ES5"
  }
}
```

рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ рЃЎрЃџрЃљрЃАрЃўрЃА рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃўрЃА рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃгрЃљрЃАрЃљрЃЎрЃўрЃЌрЃ«рЃљрЃЊ рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃЮрЃЌ `getMetadata`

```typescript
Reflect.getMetadata('design:paramtypes', App);
```

рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў рЃЊрЃљрЃњрЃЋрЃўрЃЉрЃарЃБрЃюрЃЊрЃћрЃЉрЃљ `undefined`, рЃўрЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА рЃарЃЮрЃЏ рЃЎрЃџрЃљрЃАрЃќрЃћ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃњрЃЋрЃЦрЃЮрЃюрЃЊрЃћрЃА рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃўрЃА рЃўрЃДрЃЮрЃА рЃЊрЃћрЃЎрЃЮрЃарЃўрЃарЃћрЃЉрЃБрЃџрЃў.


```typescript
interface ClassType<T> {
    new (...args: any[]): T;
};

function Injectable() {
    return function<T>(target: ClassType<T>) {
        console.log(Reflect.getMetadata('design:paramtypes', target))
    };
}
```

`design:paramtypes` рЃЊрЃљрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃА рЃарЃЮрЃЏрЃџрЃћрЃЉрЃўрЃф рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃерЃўрЃљ рЃњрЃљрЃЊрЃљрЃфрЃћрЃЏрЃБрЃџрЃў. рЃЏрЃЮрЃЋрЃюрЃўрЃерЃюрЃЮрЃЌ рЃЎрЃџрЃљрЃАрЃћрЃЉрЃў `@Injectable` рЃЊрЃћрЃЎрЃЮрЃарЃљрЃбрЃЮрЃарЃўрЃЌ:

```typescript
//...
@Injectable()
class WelcomeMessageGenerator {
   getMessage() {
        return `Hello! This is a worst example!`
    }
}

@Injectable()
class App {
  constructor(private welcomeMessage: WelcomeMessageGenerator) {}

  yieldWelcomeMessage() {
      console.log(this.welcomeMessage.getMessage())
  }
}
//...
```

Output:
```sh
undefined
[ [Function: WelcomeMessageGenerator] ]
```

рЃарЃљрЃЊрЃњрЃљрЃю `WelcomeMessageGenerator` рЃЎрЃџрЃљрЃАрЃА рЃЎрЃЮрЃюрЃбрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃерЃў рЃљрЃа рЃњрЃљрЃЊрЃљрЃћрЃфрЃћрЃЏрЃљ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃў, рЃЊрЃљрЃўрЃЉрЃћрЃГрЃЊрЃћрЃЉрЃљ undefined рЃърЃўрЃарЃЋрЃћрЃџ рЃ«рЃљрЃќрЃќрЃћ.

рЃљрЃЏрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ рЃЕрЃЋрЃћрЃю рЃБрЃЎрЃЋрЃћ рЃњрЃљрЃњрЃЋрЃљрЃЕрЃюрЃўрЃљ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃў рЃарЃЮрЃЏ рЃЎрЃџрЃљрЃАрЃћрЃЉрЃА рЃљрЃЏ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃќрЃћ рЃЊрЃљрЃДрЃарЃЊрЃюрЃЮрЃЉрЃўрЃЌ рЃерЃћрЃЋрЃБрЃЦрЃЏрЃюрЃљрЃЌ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃў. 

рЃерЃћрЃЋрЃЦрЃЏрЃюрЃљрЃЌ `Injector` рЃЎрЃџрЃљрЃАрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃърЃљрЃАрЃБрЃ«рЃўрЃАрЃЏрЃњрЃћрЃЉрЃћрЃџрЃў рЃўрЃЦрЃюрЃћрЃЉрЃљ рЃЏрЃћрЃбрЃљ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ рЃЎрЃџрЃљрЃАрЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљрЃќрЃћ.

```typescript
class Injector {
  static resolve<T>(target: ClassType<T>): T {
    const tokens = Reflect.getMetadata('design:paramtypes', target);

    const tokenInstances = tokens.map(token => new token());

    return new target(...tokenInstances);
  }
}
```

рЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў `resolve` рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў, рЃФрЃљрЃџрЃўрЃљрЃю рЃЏрЃљрЃарЃбрЃўрЃЋ рЃАрЃљрЃЏрЃБрЃерЃљрЃЮрЃА рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА

```typescript
//...
const tokens = Reflect.getMetadata('design:paramtypes', target)
//...
```

рЃЋрЃўрЃдрЃћрЃЉрЃЌ рЃЎрЃЮрЃюрЃАрЃбрЃарЃБрЃЦрЃбрЃЮрЃарЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃА `[ [Function: WelcomeMessageGenerator] ]`,рЃЋрЃЦрЃЏрЃюрЃўрЃЌ рЃљрЃЏ рЃЎрЃџрЃљрЃАрЃўрЃА instance-рЃЉрЃА рЃЊрЃљ рЃЋрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃЌ рЃЎрЃџрЃљрЃАрЃА рЃўрЃюрЃўрЃфрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃўрЃЌ.

```typescript
//...
const tokenInstances = tokens.map(token => new token());

return new target(...tokenInstances);
//...
```


рЃЏрЃљрЃњрЃарЃљрЃЏ рЃўрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў рЃЌрЃБ `WelcomeMessageGenerator` рЃЊрЃљрЃћрЃЏрЃљрЃбрЃћрЃЉрЃљ рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃљ, рЃЏрЃўрЃАрЃў рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ рЃљрЃа рЃЏрЃЮрЃ«рЃЊрЃћрЃЉрЃљ, рЃарЃљрЃЊрЃњрЃљрЃю рЃЕрЃЋрЃћрЃю рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ `App` рЃЎрЃџрЃљрЃАрЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃА рЃЋрЃўрЃдрЃћрЃЉрЃЌ `tokens` рЃфрЃЋрЃџрЃљрЃЊрЃерЃў. 

 ```typescript
//...
@Injectable()
class Greeter {
  hello() {
    return 'Hello'
  }
}

@Injectable()
class WelcomeMessageGenerator {
  constructor(private greeter: Greeter) {}

  getMessage() {
    const greeting = this.greeter.hello()
    return `${greeting}, this is a worst example!`
  }
}
//...
 ```

 Output:

 ```sh
 TypeError: Cannot read properties of undefined (reading 'hello')
 ```

рЃарЃљрЃЊрЃњрЃљрЃю рЃДрЃЋрЃћрЃџрЃљ рЃЎрЃџрЃљрЃАрЃўрЃА рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃўрЃА рЃўрЃюрЃўрЃфрЃўрЃљрЃџрЃўрЃќрЃљрЃфрЃўрЃљ рЃЏрЃЮрЃЋрЃљрЃ«рЃЊрЃўрЃюрЃЮрЃЌ, `resolve` рЃарЃћрЃЎрЃБрЃарЃАрЃўрЃБрЃџрЃљрЃЊ рЃБрЃюрЃЊрЃљ рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃФрЃљрЃ«рЃЮрЃЌ, рЃўрЃюрЃўрЃфрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЎрЃџрЃљрЃАрЃўрЃА instance-рЃўрЃЌ.


```typescript
//...
class Injector {
  static resolve<T>(target: ClassType<T>): T {
    const tokens = (Reflect.getMetadata('design:paramtypes', target) || []).map(
      (token) => this.resolve(token)
    );

    return new target(...tokens);
  }
}
//...
```

DI-рЃўрЃА рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃљрЃдрЃљрЃа рЃњрЃЋрЃўрЃгрЃћрЃЋрЃА рЃЎрЃџрЃљрЃАрЃўрЃА рЃЊрЃљ рЃЏрЃўрЃАрЃў рЃЊрЃљрЃЏрЃЮрЃЎрЃўрЃЊрЃћрЃЉрЃБрЃџрЃћрЃЉрЃћрЃЉрЃўрЃА рЃ«рЃћрЃџрЃўрЃЌ рЃерЃћрЃЦрЃЏрЃюрЃљ. 


DI-рЃўрЃА рЃњрЃљрЃарЃћрЃерЃћ:
```typescript
//...
const greeter = new Greeter();
const welcomeMessageGenerator = new WelcomeMessageGenerator(greeter);
const app = new App(welcomeMessageGenerator);

app.yieldWelcomeMessage()
```

DI:
```typescript
//...
const app = Injector.resolve<App>(App);

app.yieldWelcomeMessage()
```

рЃАрЃарЃБрЃџрЃў рЃЎрЃЮрЃЊрЃў рЃерЃћрЃњрЃўрЃФрЃџрЃўрЃљрЃЌ рЃюрЃљрЃ«рЃЮрЃЌ: https://github.com/nikolozz/blog-write-simple-di-example

